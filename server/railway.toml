# Railway Configuration File for JobQ Backend
# Since the root directory is set to "server", Railway executes commands from the server directory
# So we don't need "cd server &&" - Railway is already in the server directory

[build]
# Use Nixpacks as the builder (default for Node.js)
builder = "nixpacks"

# Build command - Railway runs this from the server directory (root directory = "server")
buildCommand = "npm ci --only=production"

[deploy]
# Start command - Railway runs this from the server directory
startCommand = "node src/app.js"

# Health check configuration
# Railway will check this endpoint to ensure the service is healthy
healthcheckPath = "/api/jobs/health"
healthcheckTimeout = 100

# Restart policy: restart on failure
restartPolicyType = "on_failure"
restartPolicyMaxRetries = 10

